this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates.Authentication=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"<div id='authentication-modal' class='modal' tabindex='-1' role='dialog' aria-labelledby='authentication-label' aria-hidden='true' data-backdrop='false' data-keyboard='false'>\n\n    <div class='modal-dialog'>\n\n        <div class='modal-content'>\n\n            <div class='modal-header'>\n                <h4 class='modal-title' id='authentication-label'>Sign In</h4>\n            </div>\n\n            <div class='modal-body'>\n\n                <form class='form-horizontal' role='form'>\n\n                    <div class='form-group'>\n\n                        <label for='authentication-username' class='col-sm-2 control-label'>Username</label>\n\n                        <div class='col-sm-10'>\n                          <input type='text' class='form-control' id='authentication-username' data-id='username' placeholder='Username'>\n                        </div>\n\n                    </div>\n\n                    <div class='form-group'>\n\n                        <label for='authentication-password' class='col-sm-2 control-label'>Password</label>\n\n                        <div class='col-sm-10'>\n                          <input type='password' class='form-control' id='authentication-password' data-id='password' placeholder='Password'>\n                        </div>\n\n                    </div>\n\n                </form>\n\n            </div>\n\n            <div class='modal-footer'>\n                <button type='button' class='btn btn-primary' data-action='sign-in'>Sign In</button>\n            </div>\n\n        </div>\n\n    </div>\n\n</div>\n"},useData:!0}),this.Handlebars.templates.CoursesContainer=Handlebars.template({1:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j=this.lambda;return"                <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/students'>Students</a></li>\n                <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/students/"+i((f=null!=(f=b.studentId||(null!=a?a.studentId:a))?f:h,typeof f===g?f.call(a,{name:"studentId",hash:{},data:d}):f))+"'>"+i(j(null!=(e=null!=a?a.student:a)?e.username:e,a))+"</a></li>\n"},3:function(a){var b,c=this.lambda,d=this.escapeExpression;return" "+d(c(null!=(b=null!=a?a.student:a)?b.username:b,a))+" — "},5:function(a,b,c,d,e){var f,g=b.helperMissing,h=this.escapeExpression,i="\n                    <tr>\n\n                        <td class='col-md-1 index'>"+h((b.index||a&&a.index||g).call(a,d&&d.index,{name:"index",hash:{},data:d}))+"</td>\n\n";return f=b["if"].call(a,null!=e[1]?e[1].studentId:e[1],{name:"if",hash:{},fn:this.program(6,d,e),inverse:this.program(8,d,e),data:d}),null!=f&&(i+=f),i+"\n                    </tr>\n\n"},6:function(a,b,c,d,e){var f,g=this.lambda,h=this.escapeExpression,i="function",j=b.helperMissing;return"\n                            <td class='col-md-11 link'><a href='./#/"+h(g(null!=e[2]?e[2].instanceId:e[2],a))+"/students/"+h(g(null!=e[2]?e[2].studentId:e[2],a))+"/courses/"+h((f=null!=(f=b.id||(null!=a?a.id:a))?f:j,typeof f===i?f.call(a,{name:"id",hash:{},data:d}):f))+"/exercises'>"+h((f=null!=(f=b.name||(null!=a?a.name:a))?f:j,typeof f===i?f.call(a,{name:"name",hash:{},data:d}):f))+"</a></td>\n\n"},8:function(a,b,c,d,e){var f,g=this.lambda,h=this.escapeExpression,i="function",j=b.helperMissing;return"\n                            <td class='col-md-11 link'><a href='./#/"+h(g(null!=e[2]?e[2].instanceId:e[2],a))+"/courses/"+h((f=null!=(f=b.id||(null!=a?a.id:a))?f:j,typeof f===i?f.call(a,{name:"id",hash:{},data:d}):f))+"/exercises'>"+h((f=null!=(f=b.name||(null!=a?a.name:a))?f:j,typeof f===i?f.call(a,{name:"name",hash:{},data:d}):f))+"</a></td>\n\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d,e){var f,g,h,i="function",j=b.helperMissing,k=this.escapeExpression,l=this.lambda,m=b.blockHelperMissing,n="<section>\n\n    <div class='row'>\n\n        <ol class='breadcrumb'>\n\n            <li><a href='./'>Instances</a></li>\n            <li><a href='./#/"+k((g=null!=(g=b.instanceId||(null!=a?a.instanceId:a))?g:j,typeof g===i?g.call(a,{name:"instanceId",hash:{},data:d}):g))+"'>"+k((g=null!=(g=b.instanceId||(null!=a?a.instanceId:a))?g:j,typeof g===i?g.call(a,{name:"instanceId",hash:{},data:d}):g))+"</a></li>\n\n";return f=b["if"].call(a,null!=a?a.studentId:a,{name:"if",hash:{},fn:this.program(1,d,e),inverse:this.noop,data:d}),null!=f&&(n+=f),n+="\n            <li class='active'>Courses</li>\n\n        </ol>\n\n    </div>\n\n    <div class='row header'>\n\n        <h2 class='col-md-9'>\n            ",f=b["if"].call(a,null!=a?a.studentId:a,{name:"if",hash:{},fn:this.program(3,d,e),inverse:this.noop,data:d}),null!=f&&(n+=f),n+=" Courses ("+k(l(null!=(f=null!=a?a.courses:a)?f.length:f,a))+")\n        </h2>\n\n",f=this.invokePartial(c.search,"        ","search",a,void 0,b,c,d),null!=f&&(n+=f),n+="\n    </div>\n\n    <div class='row'>\n\n        <table class='table table-hover'>\n\n            <thead>\n                <tr>\n                    <th class='index'>#</th>\n                    <th>Name</th>\n                </tr>\n            </thead>\n\n            <tbody>\n\n",g=null!=(g=b.courses||(null!=a?a.courses:a))?g:j,h={name:"courses",hash:{},fn:this.program(5,d,e),inverse:this.noop,data:d},f=typeof g===i?g.call(a,h):g,b.courses||(f=m.call(a,f,h)),null!=f&&(n+=f),n+"\n            </tbody>\n\n        </table>\n\n    </div>\n\n</section>\n"},usePartial:!0,useData:!0,useDepths:!0}),this.Handlebars.templates.EditorSettingsContainer=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"<footer>\n\n    <a href='#editor-settings' data-toggle='modal' data-target='#editor-settings' class='pull-right'><span class='glyphicon glyphicon-wrench icon-gray'></span></a>\n\n    <div id='editor-settings' class='modal fade' tabindex='-1' role='dialog' aria-labelledby='editor-settings-label' aria-hidden='true' data-backdrop='false'>\n\n        <div class='modal-dialog'>\n\n            <div class='modal-content'>\n\n                <div class='modal-header'>\n                    <button type='button' class='close' data-dismiss='modal'><span aria-hidden='true'>&times;</span><span class='sr-only'>Close</span></button>\n                    <h4 class='modal-title' id='editor-settings-label'>Settings</h4>\n                </div>\n\n                <div class='modal-body'>\n\n                    <form class='form-horizontal' role='form'>\n\n                        <div class='form-group'>\n\n                            <div class='col-sm-offset-2 col-sm-10'>\n                                <div class='checkbox'>\n                                    <label>\n                                        <input type='checkbox' data-id='ignore-empty-lines' checked> Ignore empty lines (improves diff results)\n                                    </label>\n                                </div>\n                            </div>\n\n                        </div>\n\n                        <div class='form-group'>\n\n                            <label for='editor-settings-theme' class='col-sm-2 control-label'>Theme</label>\n\n                            <div class='col-sm-10'>\n\n                                <select id='editor-settings-theme' class='form-control' data-id='theme'>\n                                    <option value='ace/theme/light'>Light</option>\n                                    <option value='ace/theme/dark'>Dark</option>\n                                </select>\n\n                            </div>\n\n                        </div>\n\n                        <div class='form-group'>\n\n                            <label for='editor-settings-font-size' class='col-sm-2 control-label'>Font size</label>\n\n                            <div class='col-sm-10'>\n\n                                <select id='editor-settings-font-size' class='form-control' data-id='font-size'>\n                                    <option value='11'>Small</option>\n                                    <option value='12' selected>Normal</option>\n                                    <option value='13'>Larger</option>\n                                    <option value='14'>Large</option>\n                                    <option value='15'>Extra Large</option>\n                                </select>\n\n                            </div>\n\n                        </div>\n\n                    </form>\n\n                </div>\n\n                <div class='modal-footer'>\n                    <button type='button' class='btn btn-default' data-dismiss='modal'>Cancel</button>\n                    <button type='button' class='btn btn-primary' data-action='save' data-dismiss='modal'>Save</button>\n                </div>\n\n            </div>\n\n        </div>\n\n    </div>\n\n</footer>\n"},useData:!0}),this.Handlebars.templates.EditorTopContainer=Handlebars.template({1:function(){return"\n        <section class='split'>\n\n            <div class='previous'><span>Previous</span></div>\n            <div class='current'><span>Current</span></div>\n\n        </section>\n\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=b.helperMissing,h=this.escapeExpression,i="function",j=this.lambda,k="<header>\n\n    <section>\n\n        <h1>"+h((b.filename||a&&a.filename||g).call(a,null!=a?a.name:a,{name:"filename",hash:{},data:d}))+"</h1>\n\n        <span class='pull-right'>\n\n            + "+h((b.duration||a&&a.duration||g).call(a,null!=(e=null!=a?a.snapshot:a)?e.timestamp:e,null!=(e=null!=(e=null!=a?a.previous:a)?e.snapshot:e)?e.timestamp:e,{name:"duration",hash:{},data:d}))+"\n\n            <a id='editor-inspector' href='#' data-toggle='popover' data-placement='bottom'\n\n               data-original-title='\n\n                    <time>"+h((b.date||a&&a.date||g).call(a,null!=(e=null!=(e=null!=a?a.previous:a)?e.snapshot:e)?e.timestamp:e,{name:"date",hash:{},data:d}))+" –</time>\n                    <time>"+h((b.date||a&&a.date||g).call(a,null!=(e=null!=a?a.snapshot:a)?e.timestamp:e,{name:"date",hash:{},data:d}))+"</time>\n\n               '\n\n               data-content='\n\n                <dl class=\"dl-horizontal pull-left\">\n\n                  <dt>Change</dt>\n                  <dd>"+h((f=null!=(f=b.percentageOfChange||(null!=a?a.percentageOfChange:a))?f:g,typeof f===i?f.call(a,{name:"percentageOfChange",hash:{},data:d}):f))+" %</dd>\n\n                  <dt>Insert</dt>\n                  <dd>"+h(j(null!=(e=null!=a?a.difference:a)?e.insert:e,a))+" "+h((b.pluralise||a&&a.pluralise||g).call(a,null!=(e=null!=a?a.difference:a)?e.insert:e,"line",{name:"pluralise",hash:{},data:d}))+"</dd>\n\n                  <dt>Replace</dt>\n                  <dd>"+h(j(null!=(e=null!=a?a.difference:a)?e.replace:e,a))+" "+h((b.pluralise||a&&a.pluralise||g).call(a,null!=(e=null!=a?a.difference:a)?e.replace:e,"line",{name:"pluralise",hash:{},data:d}))+"</dd>\n\n                  <dt>Delete</dt>\n                  <dd>"+h(j(null!=(e=null!=a?a.difference:a)?e["delete"]:e,a))+" "+h((b.pluralise||a&&a.pluralise||g).call(a,null!=(e=null!=a?a.difference:a)?e["delete"]:e,"line",{name:"pluralise",hash:{},data:d}))+"</dd>\n\n                </dl>\n\n            '><span class='glyphicon glyphicon-info-sign icon-gray'></span></a>\n\n        </span>\n\n    </section>\n\n";return e=b["if"].call(a,null!=a?a.split:a,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+"\n</header>\n"},useData:!0}),this.Handlebars.templates.Error=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return"<p class='alert "+h((e=null!=(e=b["class"]||(null!=a?a["class"]:a))?e:g,typeof e===f?e.call(a,{name:"class",hash:{},data:d}):e))+"'>"+h((e=null!=(e=b.message||(null!=a?a.message:a))?e:g,typeof e===f?e.call(a,{name:"message",hash:{},data:d}):e))+"</p>\n"},useData:!0}),this.Handlebars.templates.ExercisesContainer=Handlebars.template({1:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j=this.lambda;return"                <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/students'>Students</a></li>\n                <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/students/"+i((f=null!=(f=b.studentId||(null!=a?a.studentId:a))?f:h,typeof f===g?f.call(a,{name:"studentId",hash:{},data:d}):f))+"'>"+i(j(null!=(e=null!=a?a.student:a)?e.username:e,a))+"</a></li>\n"},3:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return"students/"+h((e=null!=(e=b.studentId||(null!=a?a.studentId:a))?e:g,typeof e===f?e.call(a,{name:"studentId",hash:{},data:d}):e))+"/"},5:function(a){var b,c=this.lambda,d=this.escapeExpression;return" "+d(c(null!=(b=null!=a?a.student:a)?b.username:b,a))+" — "},7:function(a,b,c,d,e){var f,g=b.helperMissing,h=this.escapeExpression,i="\n                    <tr>\n\n                        <td class='col-md-1 index'>"+h((b.index||a&&a.index||g).call(a,d&&d.index,{name:"index",hash:{},data:d}))+"</td>\n\n";return f=b["if"].call(a,null!=e[1]?e[1].studentId:e[1],{name:"if",hash:{},fn:this.program(8,d,e),inverse:this.program(10,d,e),data:d}),null!=f&&(i+=f),i+"\n                    </tr>\n\n"},8:function(a,b,c,d,e){var f,g=this.lambda,h=this.escapeExpression,i="function",j=b.helperMissing;return"\n                            <td class='col-md-11 link'><a href='./#/"+h(g(null!=e[2]?e[2].instanceId:e[2],a))+"/students/"+h(g(null!=e[2]?e[2].studentId:e[2],a))+"/courses/"+h(g(null!=e[2]?e[2].courseId:e[2],a))+"/exercises/"+h((f=null!=(f=b.id||(null!=a?a.id:a))?f:j,typeof f===i?f.call(a,{name:"id",hash:{},data:d}):f))+"/snapshots'>"+h((f=null!=(f=b.name||(null!=a?a.name:a))?f:j,typeof f===i?f.call(a,{name:"name",hash:{},data:d}):f))+"</a></td>\n\n"},10:function(a,b,c,d,e){var f,g=this.lambda,h=this.escapeExpression,i="function",j=b.helperMissing;return"\n                            <td class='col-md-11 link'><a href='./#/"+h(g(null!=e[2]?e[2].instanceId:e[2],a))+"/courses/"+h(g(null!=e[2]?e[2].courseId:e[2],a))+"/exercises/"+h((f=null!=(f=b.id||(null!=a?a.id:a))?f:j,typeof f===i?f.call(a,{name:"id",hash:{},data:d}):f))+"/students'>"+h((f=null!=(f=b.name||(null!=a?a.name:a))?f:j,typeof f===i?f.call(a,{name:"name",hash:{},data:d}):f))+"</a></td>\n\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d,e){var f,g,h,i="function",j=b.helperMissing,k=this.escapeExpression,l=this.lambda,m=b.blockHelperMissing,n="<section>\n\n    <div class='row'>\n\n        <ol class='breadcrumb'>\n\n            <li><a href='./'>Instances</a></li>\n            <li><a href='./#/"+k((g=null!=(g=b.instanceId||(null!=a?a.instanceId:a))?g:j,typeof g===i?g.call(a,{name:"instanceId",hash:{},data:d}):g))+"'>"+k((g=null!=(g=b.instanceId||(null!=a?a.instanceId:a))?g:j,typeof g===i?g.call(a,{name:"instanceId",hash:{},data:d}):g))+"</a></li>\n\n";return f=b["if"].call(a,null!=a?a.studentId:a,{name:"if",hash:{},fn:this.program(1,d,e),inverse:this.noop,data:d}),null!=f&&(n+=f),n+="\n            <li><a href='./#/"+k((g=null!=(g=b.instanceId||(null!=a?a.instanceId:a))?g:j,typeof g===i?g.call(a,{name:"instanceId",hash:{},data:d}):g))+"/",f=b["if"].call(a,null!=a?a.studentId:a,{name:"if",hash:{},fn:this.program(3,d,e),inverse:this.noop,data:d}),null!=f&&(n+=f),n+="courses'>Courses</a></li>\n            <li><a href='./#/"+k((g=null!=(g=b.instanceId||(null!=a?a.instanceId:a))?g:j,typeof g===i?g.call(a,{name:"instanceId",hash:{},data:d}):g))+"/",f=b["if"].call(a,null!=a?a.studentId:a,{name:"if",hash:{},fn:this.program(3,d,e),inverse:this.noop,data:d}),null!=f&&(n+=f),n+="courses/"+k((g=null!=(g=b.courseId||(null!=a?a.courseId:a))?g:j,typeof g===i?g.call(a,{name:"courseId",hash:{},data:d}):g))+"'>"+k(l(null!=(f=null!=a?a.course:a)?f.name:f,a))+"</a></li>\n            <li class='active'>Exercises</li>\n\n        </ol>\n\n    </div>\n\n    <div class='row header'>\n\n        <h2 class='col-md-9'>\n            ",f=b["if"].call(a,null!=a?a.studentId:a,{name:"if",hash:{},fn:this.program(5,d,e),inverse:this.noop,data:d}),null!=f&&(n+=f),n+=" "+k(l(null!=(f=null!=a?a.course:a)?f.name:f,a))+" — Exercises ("+k(l(null!=(f=null!=a?a.exercises:a)?f.length:f,a))+")\n        </h2>\n\n",f=this.invokePartial(c.search,"        ","search",a,void 0,b,c,d),null!=f&&(n+=f),n+="\n    </div>\n\n    <div class='row'>\n\n        <table class='table table-hover'>\n\n            <thead>\n                <tr>\n                    <th class='index'>#</th>\n                    <th>Name</th>\n                </tr>\n            </thead>\n\n            <tbody>\n\n",g=null!=(g=b.exercises||(null!=a?a.exercises:a))?g:j,h={name:"exercises",hash:{},fn:this.program(7,d,e),inverse:this.noop,data:d},f=typeof g===i?g.call(a,h):g,b.exercises||(f=m.call(a,f,h)),null!=f&&(n+=f),n+"\n            </tbody>\n\n        </table>\n\n    </div>\n\n</section>\n"},usePartial:!0,useData:!0,useDepths:!0}),this.Handlebars.templates.InstanceContainer=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a){var b,c=this.lambda,d=this.escapeExpression;return"<section>\n\n    <div class='row'>\n\n        <ol class='breadcrumb'>\n\n            <li><a href='./'>Instances</a></li>\n            <li class='active'>"+d(c(null!=(b=null!=a?a.instance:a)?b.name:b,a))+"</li>\n\n        </ol>\n\n    </div>\n\n    <div class='row header'>\n\n        <h2>\n            Instance — "+d(c(null!=(b=null!=a?a.instance:a)?b.name:b,a))+"\n        </h2>\n\n    </div>\n\n    <div class='row'>\n\n        <table class='table table-hover'>\n\n            <thead>\n                <tr>\n                    <th>Navigate to</th>\n                </tr>\n            </thead>\n\n            <tbody>\n\n                <tr>\n                    <td class='link'><a href='./#/"+d(c(null!=(b=null!=a?a.instance:a)?b.id:b,a))+"/students'>Students</a></td>\n                </tr>\n\n                <tr>\n                    <td class='link'><a href='./#/"+d(c(null!=(b=null!=a?a.instance:a)?b.id:b,a))+"/courses'>Courses</a></td>\n                </tr>\n\n            </tbody>\n\n        </table>\n\n    </div>\n\n</section>\n"},useData:!0}),this.Handlebars.templates.Loading=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"<div class='spinner'>\n    <div class='double-bounce1'></div>\n    <div class='double-bounce2'></div>\n</div>\n"},useData:!0}),this.Handlebars.templates.NavigationBarContainer=Handlebars.template({1:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j=this.lambda;return"\n            <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/courses'>Courses</a></li>\n            <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/courses/"+i((f=null!=(f=b.courseId||(null!=a?a.courseId:a))?f:h,typeof f===g?f.call(a,{name:"courseId",hash:{},data:d}):f))+"'>"+i(j(null!=(e=null!=a?a.course:a)?e.name:e,a))+"</a></li>\n            <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/courses/"+i((f=null!=(f=b.courseId||(null!=a?a.courseId:a))?f:h,typeof f===g?f.call(a,{name:"courseId",hash:{},data:d}):f))+"/exercises'>Exercises</a></li>\n            <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/courses/"+i((f=null!=(f=b.courseId||(null!=a?a.courseId:a))?f:h,typeof f===g?f.call(a,{name:"courseId",hash:{},data:d}):f))+"/exercises/"+i((f=null!=(f=b.exerciseId||(null!=a?a.exerciseId:a))?f:h,typeof f===g?f.call(a,{name:"exerciseId",hash:{},data:d}):f))+"'>"+i(j(null!=(e=null!=a?a.exercise:a)?e.name:e,a))+"</a></li>\n            <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/courses/"+i((f=null!=(f=b.courseId||(null!=a?a.courseId:a))?f:h,typeof f===g?f.call(a,{name:"courseId",hash:{},data:d}):f))+"/exercises/"+i((f=null!=(f=b.exerciseId||(null!=a?a.exerciseId:a))?f:h,typeof f===g?f.call(a,{name:"exerciseId",hash:{},data:d}):f))+"/students'>Students</a></li>\n            <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/courses/"+i((f=null!=(f=b.courseId||(null!=a?a.courseId:a))?f:h,typeof f===g?f.call(a,{name:"courseId",hash:{},data:d}):f))+"/exercises/"+i((f=null!=(f=b.exerciseId||(null!=a?a.exerciseId:a))?f:h,typeof f===g?f.call(a,{name:"exerciseId",hash:{},data:d}):f))+"/students/"+i((f=null!=(f=b.studentId||(null!=a?a.studentId:a))?f:h,typeof f===g?f.call(a,{name:"studentId",hash:{},data:d}):f))+"'>"+i(j(null!=(e=null!=a?a.student:a)?e.username:e,a))+"</a></li>\n\n"},3:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j=this.lambda;return"\n            <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/students'>Students</a></li>\n            <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/students/"+i((f=null!=(f=b.studentId||(null!=a?a.studentId:a))?f:h,typeof f===g?f.call(a,{name:"studentId",hash:{},data:d}):f))+"'>"+i(j(null!=(e=null!=a?a.student:a)?e.username:e,a))+"</a></li>\n            <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/students/"+i((f=null!=(f=b.studentId||(null!=a?a.studentId:a))?f:h,typeof f===g?f.call(a,{name:"studentId",hash:{},data:d}):f))+"/courses'>Courses</a></li>\n            <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/students/"+i((f=null!=(f=b.studentId||(null!=a?a.studentId:a))?f:h,typeof f===g?f.call(a,{name:"studentId",hash:{},data:d}):f))+"/courses/"+i((f=null!=(f=b.courseId||(null!=a?a.courseId:a))?f:h,typeof f===g?f.call(a,{name:"courseId",hash:{},data:d}):f))+"'>"+i(j(null!=(e=null!=a?a.course:a)?e.name:e,a))+"</a></li>\n            <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/students/"+i((f=null!=(f=b.studentId||(null!=a?a.studentId:a))?f:h,typeof f===g?f.call(a,{name:"studentId",hash:{},data:d}):f))+"/courses/"+i((f=null!=(f=b.courseId||(null!=a?a.courseId:a))?f:h,typeof f===g?f.call(a,{name:"courseId",hash:{},data:d}):f))+"/exercises'>Exercises</a></li>\n            <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/students/"+i((f=null!=(f=b.studentId||(null!=a?a.studentId:a))?f:h,typeof f===g?f.call(a,{name:"studentId",hash:{},data:d}):f))+"/courses/"+i((f=null!=(f=b.courseId||(null!=a?a.courseId:a))?f:h,typeof f===g?f.call(a,{name:"courseId",hash:{},data:d}):f))+"/exercises/"+i((f=null!=(f=b.exerciseId||(null!=a?a.exerciseId:a))?f:h,typeof f===g?f.call(a,{name:"exerciseId",hash:{},data:d}):f))+"'>"+i(j(null!=(e=null!=a?a.exercise:a)?e.name:e,a))+"</a></li>\n\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j="<section>\n\n    <ol class='breadcrumb'>\n\n        <li><a href='./'>Instances</a></li>\n        <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"'>"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"</a></li>\n\n";return e=b["if"].call(a,null!=a?a.courseRoute:a,{name:"if",hash:{},fn:this.program(1,d),inverse:this.program(3,d),data:d}),null!=e&&(j+=e),j+"\n        <li class='active'>Snapshots</li>\n\n    </ol>\n\n</section>\n"},useData:!0}),this.Handlebars.templates.RootContainer=Handlebars.template({1:function(a,b,c,d){var e,f=b.helperMissing,g=this.escapeExpression,h="function";return"\n                    <tr>\n\n                        <td class='col-md-1 index'>"+g((b.index||a&&a.index||f).call(a,d&&d.index,{name:"index",hash:{},data:d}))+"</td>\n                        <td class='col-md-11 link'><a href='./#/"+g((e=null!=(e=b.id||(null!=a?a.id:a))?e:f,typeof e===h?e.call(a,{name:"id",hash:{},data:d}):e))+"'>"+g((e=null!=(e=b.id||(null!=a?a.id:a))?e:f,typeof e===h?e.call(a,{name:"id",hash:{},data:d}):e))+"</a></td>\n\n                    </tr>\n\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g,h=this.lambda,i=this.escapeExpression,j="function",k=b.helperMissing,l=b.blockHelperMissing,m="<section>\n\n    <div class='row'>\n\n        <ol class='breadcrumb'>\n\n            <li class='active'>Instances</li>\n\n        </ol>\n\n    </div>\n\n    <div class='row header'>\n\n        <h2 class='col-md-9'>\n            Instances ("+i(h(null!=(e=null!=a?a.instances:a)?e.length:e,a))+")\n        </h2>\n\n";return e=this.invokePartial(c.search,"        ","search",a,void 0,b,c,d),null!=e&&(m+=e),m+="\n    </div>\n\n    <div class='row'>\n\n        <table class='table table-hover'>\n\n            <thead>\n                <tr>\n                    <th class='index'>#</th>\n                    <th>Name</th>\n                </tr>\n            </thead>\n\n            <tbody>\n\n",f=null!=(f=b.instances||(null!=a?a.instances:a))?f:k,g={name:"instances",hash:{},fn:this.program(1,d),inverse:this.noop,data:d},e=typeof f===j?f.call(a,g):f,b.instances||(e=l.call(a,e,g)),null!=e&&(m+=e),m+"\n            </tbody>\n\n        </table>\n\n    </div>\n\n</section>\n"},usePartial:!0,useData:!0}),this.Handlebars.templates.SearchContainer=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return"<div class='col-md-3'>\n\n    <div class='input-group'>\n\n        <input type='text' class='form-control' placeholder='Search' data-id='query-string' value='"+h((e=null!=(e=b.query||(null!=a?a.query:a))?e:g,typeof e===f?e.call(a,{name:"query",hash:{},data:d}):e))+"' />\n\n        <span class='input-group-btn'>\n            <button class='btn btn-default' type='button' data-action='search' title='Search'>\n                <span class='glyphicon glyphicon-search'></span>\n            </button>\n        </span>\n\n    </div>\n\n</div>\n"},useData:!0}),this.Handlebars.templates.SnapshotActionsContainer=Handlebars.template({1:function(){return"\n            <button id='rewind' type='button' class='btn btn-default btn-sm'><span class='glyphicon glyphicon-backward icon-gray'></span></button>\n            <button id='play' type='button' class='btn btn-default btn-sm'><span class='glyphicon glyphicon-play icon-gray'></span></button>\n\n            <select id='speed' class='form-control input-sm'>\n                <option selected>1x</option>\n                <option>2x</option>\n                <option>4x</option>\n                <option>8x</option>\n                <option>16x</option>\n                <option>32x</option>\n            </select>\n\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="<div class='row'>\n\n    <div class='col-md-6'>\n\n        <button id='toggleBrowser' type='button' class='btn btn-default btn-sm' data-toggle='button'><span class='icon icon-folder icon-gray'></span></button>\n        <button id='split' type='button' class='btn btn-default btn-sm' data-toggle='button'><span class='icon icon-split-editor icon-gray'></span></button>\n        <button id='diff' type='button' class='btn btn-default btn-sm' data-toggle='button'><span class='icon icon-diff icon-gray'></span></button>\n        <button id='level' type='button' class='btn btn-default btn-sm' data-toggle='button'><span class='icon icon-key-level icon-gray'></span></button>\n\n";return e=b["if"].call(a,null!=a?a.playback:a,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+="\n    </div>\n\n",e=this.invokePartial(c.snapshotNavigation,"    ","snapshotNavigation",a,void 0,b,c,d),null!=e&&(f+=e),f+"\n</div>\n"},usePartial:!0,useData:!0}),this.Handlebars.templates.SnapshotFilesContainer=Handlebars.template({1:function(a,b,c,d,e){var f,g="\n";return f=b["if"].call(a,d&&d.key,{name:"if",hash:{},fn:this.program(2,d,e),inverse:this.noop,data:d}),null!=f&&(g+=f),g+="\n",f=b.each.call(a,a,{name:"each",hash:{},fn:this.program(4,d,e),inverse:this.noop,data:d}),null!=f&&(g+=f),g+"\n"},2:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return"\n                <li class='folder'><span class='glyphicon glyphicon-folder-open icon-gray'></span> "+f(e(d&&d.key,a))+"</li>\n\n"},4:function(a,b,c,d,e){var f,g="\n";return f=b["if"].call(a,null!=e[2]?e[2].courseRoute:e[2],{name:"if",hash:{},fn:this.program(5,d,e),inverse:this.program(7,d,e),data:d}),null!=f&&(g+=f),g+"\n"},5:function(a,b,c,d,e){var f,g="function",h=b.helperMissing,i=this.escapeExpression,j=this.lambda;return"\n                    <li data-id='"+i((f=null!=(f=b.id||(null!=a?a.id:a))?f:h,typeof f===g?f.call(a,{name:"id",hash:{},data:d}):f))+"'><a href='./#/"+i(j(null!=e[3]?e[3].instanceId:e[3],a))+"/courses/"+i(j(null!=e[3]?e[3].courseId:e[3],a))+"/exercises/"+i(j(null!=e[3]?e[3].exerciseId:e[3],a))+"/students/"+i(j(null!=e[3]?e[3].studentId:e[3],a))+"/snapshots/"+i(j(null!=e[3]?e[3].id:e[3],a))+"/files/"+i((f=null!=(f=b.id||(null!=a?a.id:a))?f:h,typeof f===g?f.call(a,{name:"id",hash:{},data:d}):f))+"?level="+i(j(null!=e[3]?e[3].level:e[3],a))+"'><i class='icon-file icon-gray'></i> "+i((b.filename||a&&a.filename||h).call(a,null!=a?a.name:a,{name:"filename",hash:{},data:d}))+"</a></li>\n\n"},7:function(a,b,c,d,e){var f,g="function",h=b.helperMissing,i=this.escapeExpression,j=this.lambda;return"\n                    <li data-id='"+i((f=null!=(f=b.id||(null!=a?a.id:a))?f:h,typeof f===g?f.call(a,{name:"id",hash:{},data:d}):f))+"'><a href='./#/"+i(j(null!=e[3]?e[3].instanceId:e[3],a))+"/students/"+i(j(null!=e[3]?e[3].studentId:e[3],a))+"/courses/"+i(j(null!=e[3]?e[3].courseId:e[3],a))+"/exercises/"+i(j(null!=e[3]?e[3].exerciseId:e[3],a))+"/snapshots/"+i(j(null!=e[3]?e[3].id:e[3],a))+"/files/"+i((f=null!=(f=b.id||(null!=a?a.id:a))?f:h,typeof f===g?f.call(a,{name:"id",hash:{},data:d}):f))+"?level="+i(j(null!=e[3]?e[3].level:e[3],a))+"'><i class='icon-file icon-gray'></i> "+i((b.filename||a&&a.filename||h).call(a,null!=a?a.name:a,{name:"filename",hash:{},data:d}))+"</a></li>\n\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d,e){var f,g=this.lambda,h=this.escapeExpression,i="<header>\n\n    <h1><span class='glyphicon glyphicon-folder-close icon-gray'></span> "+h(g(null!=(f=null!=a?a.exercise:a)?f.name:f,a))+"</h1>\n\n</header>\n\n<ul class='list-unstyled'>\n\n";return f=b.each.call(a,null!=a?a.files:a,{name:"each",hash:{},fn:this.program(1,d,e),inverse:this.noop,data:d}),null!=f&&(i+=f),i+"\n</ul>\n"},useData:!0,useDepths:!0}),this.Handlebars.templates.SnapshotNavigationContainer=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return"<div id='snapshot-navigation' class='col-md-4 col-md-offset-2'>\n\n    <div class='pull-right'>\n\n        <div class='current-index'>"+h((e=null!=(e=b.current||(null!=a?a.current:a))?e:g,typeof e===f?e.call(a,{name:"current",hash:{},data:d}):e))+" / "+h((e=null!=(e=b.total||(null!=a?a.total:a))?e:g,typeof e===f?e.call(a,{name:"total",hash:{},data:d}):e))+"</div>\n\n        <div class='btn-group btn-group-sm'>\n            <button type='button' id='first' class='btn btn-default'>First</button>\n            <button type='button' id='previous' class='btn btn-default'>Previous</button>\n            <button type='button' id='next' class='btn btn-default'>Next</button>\n            <button type='button' id='last' class='btn btn-default'>Last</button>\n        </div>\n\n    </div>\n\n</div>\n"
},useData:!0}),this.Handlebars.templates.SnapshotTagsContainer=Handlebars.template({1:function(a,b,c,d){var e,f,g,h="function",i=b.helperMissing,j=b.blockHelperMissing,k="\n    <ul class='list-unstyled'>\n\n";return f=null!=(f=b.tags||(null!=a?a.tags:a))?f:i,g={name:"tags",hash:{},fn:this.program(2,d),inverse:this.noop,data:d},e=typeof f===h?f.call(a,g):f,b.tags||(e=j.call(a,e,g)),null!=e&&(k+=e),k+"\n    </ul>\n\n"},2:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return"\n            <li>"+h((e=null!=(e=b.name||(null!=a?a.name:a))?e:g,typeof e===f?e.call(a,{name:"name",hash:{},data:d}):e))+" <button type='button' data-action='delete' data-id='"+h((e=null!=(e=b.id||(null!=a?a.id:a))?e:g,typeof e===f?e.call(a,{name:"id",hash:{},data:d}):e))+"' class='delete'>×</button></li>\n\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="<header>\n\n    <h1><span class='glyphicon glyphicon-tags icon-gray'></span> Tags</h1>\n\n</header>\n\n";return e=b["if"].call(a,null!=a?a.tags:a,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"\n<div class='input-group'>\n\n    <form>\n        <input type='text' id='appendedInputButton' class='form-control' data-id='tag' placeholder='New tag…'>\n\n        <span class='input-group-btn'>\n            <button class='btn btn-default' type='submit' data-action='create'>+</button>\n        </span>\n    </form>\n\n</div>\n"},useData:!0}),this.Handlebars.templates.SnapshotsTimelineBottomContainer=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=b.helperMissing,g=this.escapeExpression;return"<div class='row'>\n\n    <div class='col-md-2'>\n\n        <time>"+g((b.date||a&&a.date||f).call(a,null!=(e=null!=a?a.first:a)?e.timestamp:e,!1,{name:"date",hash:{},data:d}))+"</time>\n\n    </div>\n\n    <div class='center text-center'>. . .</div>\n\n    <div class='col-md-3 pull-right'>\n\n        <time class='pull-right'>"+g((b.date||a&&a.date||f).call(a,null!=(e=null!=a?a.last:a)?e.timestamp:e,!1,{name:"date",hash:{},data:d}))+" (+ "+g((b.duration||a&&a.duration||f).call(a,null!=(e=null!=a?a.last:a)?e.timestamp:e,null!=(e=null!=a?a.first:a)?e.timestamp:e,{name:"duration",hash:{},data:d}))+")</time>\n\n    </div>\n\n</div>\n"},useData:!0}),this.Handlebars.templates.StudentsContainer=Handlebars.template({1:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j=this.lambda;return"                <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/courses'>Courses</a></li>\n                <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/courses/"+i(j(null!=(e=null!=a?a.course:a)?e.id:e,a))+"'>"+i(j(null!=(e=null!=a?a.course:a)?e.name:e,a))+"</a></li>\n                <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/courses/"+i(j(null!=(e=null!=a?a.course:a)?e.id:e,a))+"/exercises'>Exercises</a></li>\n                <li><a href='./#/"+i((f=null!=(f=b.instanceId||(null!=a?a.instanceId:a))?f:h,typeof f===g?f.call(a,{name:"instanceId",hash:{},data:d}):f))+"/courses/"+i(j(null!=(e=null!=a?a.course:a)?e.id:e,a))+"/exercises/"+i(j(null!=(e=null!=a?a.exercise:a)?e.id:e,a))+"'>"+i(j(null!=(e=null!=a?a.exercise:a)?e.name:e,a))+"</a></li>\n"},3:function(a){var b,c=this.lambda,d=this.escapeExpression;return" "+d(c(null!=(b=null!=a?a.course:a)?b.name:b,a))+" — "+d(c(null!=(b=null!=a?a.exercise:a)?b.name:b,a))+" — "},5:function(a,b,c,d,e){var f,g=b.helperMissing,h=this.escapeExpression,i="\n                    <tr>\n\n                        <td class='col-md-1 index'>"+h((b.index||a&&a.index||g).call(a,d&&d.index,{name:"index",hash:{},data:d}))+"</td>\n\n";return f=b["if"].call(a,null!=e[1]?e[1].course:e[1],{name:"if",hash:{},fn:this.program(6,d,e),inverse:this.program(8,d,e),data:d}),null!=f&&(i+=f),i+"\n                    </tr>\n\n"},6:function(a,b,c,d,e){var f,g,h=this.lambda,i=this.escapeExpression,j="function",k=b.helperMissing;return"\n                            <td class='col-md-2 link'><a href='./#/"+i(h(null!=e[2]?e[2].instanceId:e[2],a))+"/courses/"+i(h(null!=(f=null!=e[2]?e[2].course:e[2])?f.id:f,a))+"/exercises/"+i(h(null!=(f=null!=e[2]?e[2].exercise:e[2])?f.id:f,a))+"/students/"+i((g=null!=(g=b.id||(null!=a?a.id:a))?g:k,typeof g===j?g.call(a,{name:"id",hash:{},data:d}):g))+"/snapshots'>"+i((g=null!=(g=b.username||(null!=a?a.username:a))?g:k,typeof g===j?g.call(a,{name:"username",hash:{},data:d}):g))+"</a></td>\n                            <td class='col-md-9'>"+i((g=null!=(g=b.name||(null!=a?a.name:a))?g:k,typeof g===j?g.call(a,{name:"name",hash:{},data:d}):g))+"</td>\n\n"},8:function(a,b,c,d,e){var f,g=this.lambda,h=this.escapeExpression,i="function",j=b.helperMissing;return"\n                            <td class='col-md-2 link'><a href='./#/"+h(g(null!=e[2]?e[2].instanceId:e[2],a))+"/students/"+h((f=null!=(f=b.id||(null!=a?a.id:a))?f:j,typeof f===i?f.call(a,{name:"id",hash:{},data:d}):f))+"/courses'>"+h((f=null!=(f=b.username||(null!=a?a.username:a))?f:j,typeof f===i?f.call(a,{name:"username",hash:{},data:d}):f))+"</a></td>\n                            <td class='col-md-9'>"+h((f=null!=(f=b.name||(null!=a?a.name:a))?f:j,typeof f===i?f.call(a,{name:"name",hash:{},data:d}):f))+"</td>\n\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d,e){var f,g,h,i="function",j=b.helperMissing,k=this.escapeExpression,l=this.lambda,m=b.blockHelperMissing,n="<section>\n\n    <div class='row'>\n\n        <ol class='breadcrumb'>\n\n            <li><a href='./'>Instances</a></li>\n            <li><a href='./#/"+k((g=null!=(g=b.instanceId||(null!=a?a.instanceId:a))?g:j,typeof g===i?g.call(a,{name:"instanceId",hash:{},data:d}):g))+"'>"+k((g=null!=(g=b.instanceId||(null!=a?a.instanceId:a))?g:j,typeof g===i?g.call(a,{name:"instanceId",hash:{},data:d}):g))+"</a></li>\n\n";return f=b["if"].call(a,null!=a?a.course:a,{name:"if",hash:{},fn:this.program(1,d,e),inverse:this.noop,data:d}),null!=f&&(n+=f),n+="\n            <li class='active'>Students</li>\n\n        </ol>\n\n    </div>\n\n    <div class='row header'>\n\n        <h2 class='col-md-9'>\n            ",f=b["if"].call(a,null!=a?a.course:a,{name:"if",hash:{},fn:this.program(3,d,e),inverse:this.noop,data:d}),null!=f&&(n+=f),n+=" Students ("+k(l(null!=(f=null!=a?a.students:a)?f.length:f,a))+")\n        </h2>\n\n",f=this.invokePartial(c.search,"        ","search",a,void 0,b,c,d),null!=f&&(n+=f),n+="\n    </div>\n\n    <div class='row'>\n\n        <table class='table table-hover'>\n\n            <thead>\n                <tr>\n\n                    <th class='index'>#</th>\n                    <th>Username</th>\n                    <th>Name</th>\n\n                </tr>\n            </thead>\n\n            <tbody>\n\n",g=null!=(g=b.students||(null!=a?a.students:a))?g:j,h={name:"students",hash:{},fn:this.program(5,d,e),inverse:this.noop,data:d},f=typeof g===i?g.call(a,h):g,b.students||(f=m.call(a,f,h)),null!=f&&(n+=f),n+"\n            </tbody>\n\n        </table>\n\n    </div>\n\n</section>\n"},usePartial:!0,useData:!0,useDepths:!0});var config={storage:{cache:{files:{url:"codebrowser.cache.files.url"},snapshot:{level:"codebrowser.cache.snapshots.level",from:"codebrowser.cache.snapshots.from"}},setting:{editor:{ignoreEmptyLines:"codebrowser.setting.editor.ignoreEmptyLines",theme:"codebrowser.setting.editor.theme",fontSize:"codebrowser.setting.editor.fontSize"}},view:{SnapshotView:{browser:"codebrowser.view.SnapshotView.browser"},EditorView:{split:"codebrowser.view.EditorView.split",diff:"codebrowser.view.EditorView.diff"}}},api:{main:{root:"http://localhost:8090/"}},cache:{expires:3600},view:{container:"#container"},editor:{configure:function(a){a.setReadOnly(!0),a.setPrintMarginColumn(!1),a.setDisplayIndentGuides(!1),a.getSession().setFoldStyle("markbeginend"),a.setTheme(localStorage.getItem(config.storage.setting.editor.theme)||"ace/theme/light"),a.setFontSize(parseInt(localStorage.getItem(config.storage.setting.editor.fontSize),10)||12),a.getSession().setTabSize(4),a.getSession().setUseWrapMode(!0),a.getSession().setWrapLimitRange(120,120)}}};$(document).ready(function(){codebrowser.initialize()});var codebrowser={app:{},cache:{},helper:{},model:{},collection:{},view:{},controller:{},router:{},initialize:function(){window.onerror=function(a){var b=new codebrowser.view.ErrorView({model:{"class":"alert-danger",message:"Oops! "+a}});codebrowser.controller.ViewController.push(b,!0)},codebrowser.app.base=new codebrowser.router.BaseRouter,codebrowser.app.instance=new codebrowser.router.InstanceRouter,codebrowser.app.student=new codebrowser.router.StudentRouter,codebrowser.app.course=new codebrowser.router.CourseRouter,codebrowser.app.exercise=new codebrowser.router.ExerciseRouter,codebrowser.app.snapshot=new codebrowser.router.SnapshotRouter,Handlebars.registerPartial("search",Handlebars.templates.SearchContainer),Handlebars.registerPartial("snapshotNavigation",Handlebars.templates.SnapshotNavigationContainer),Backbone.history.start()}};codebrowser.helper.AceMode={mode:{c:"c_cpp",css:"css",h:"c_cpp",htm:"html",html:"html",java:"java",js:"javascript",json:"json",rb:"ruby",xml:"xml",yml:"yaml"},getModeForFilename:function(a){var b="text";if(-1!==a.indexOf(".")&&0!==a.indexOf(".")){var c=a.split("."),d=c[c.length-1];b=this.mode[d]||b}return"ace/mode/"+b}},Handlebars.registerHelper("date",function(a,b){return moment(new Date(a)).format(b?"D.M.YYYY HH.mm.ss":"D.M.YYYY HH.mm")}),codebrowser.helper.Duration={calculate:function(a,b,c){var d,e,f=a-b,g=Math.round(f/1e3);if(g>60){var h=Math.round(g/60);if(h>60){var i=Math.round(h/60);if(i>24){var j=Math.round(i/24);d=j,e="day"}else d=i,e="hour"}else d=h,e="minute"}else d=g,e="second";return 1!==d&&(e+="s"),c&&(e=e.slice(0,1)),d+" "+e}},Handlebars.registerHelper("duration",function(a,b){return codebrowser.helper.Duration.calculate(a,b)}),Handlebars.registerHelper("filename",function(a){return _.last(a.split("/"))}),Handlebars.registerHelper("index",function(a){return a+1}),codebrowser.helper.ListViewFilter=function(a,b){var c={},d="body",e='input[data-id="query-string"]',f=_.extend(new Backbone.Collection,b),g=function(a){a&&(e=a.searchInputSelector||e,d=a.containerSelector||d)};return c.filter=function(){var a=$(d).find(e).val().trim().toLowerCase(),c=b.filter(function(b){var c=b.get("name").toLowerCase();return-1===c.indexOf(a)&&void 0!==b.get("username")&&(c=b.get("username").toLowerCase()),-1!==c.indexOf(a)});return f.reset(c),{filteredCollection:f,query:a}},g(a),c},Handlebars.registerHelper("pluralise",function(a,b){return 1===a?b:b+"s"}),codebrowser.model.Course=Backbone.RelationalModel.extend({urlRoot:function(){return config.api.main.root+this.get("instanceId")+"/courses"},relations:[{type:Backbone.HasMany,key:"exercises",relatedModel:"codebrowser.model.Exercise",collectionType:"codebrowser.collection.ExerciseCollection",reverseRelation:{key:"course"}}],initialize:function(a){a&&(this.instanceId=a.instanceId)}}),codebrowser.model.Diff=function(a,b){var c={replace:0,insert:0,"delete":0,total:function(){return this.replace+this.insert+this["delete"]}},d={insert:[],replace:[],"delete":[],all:[]};this.createOperation=function(a,b,c,d,e){var f=[];return f.push(a),f.push(b),f.push(c),f.push(d),f.push(e),f};for(var e=difflib.stringAsLines(a),f=difflib.stringAsLines(b),g=new difflib.SequenceMatcher(e,f),h=g.get_opcodes(),i=0,j=0;j<h.length;j++){var k=h[j],l={type:k[0],rowStart:k[3],rowEnd:k[4]-1,offset:i,overwrite:!1};if("equal"!==l.type){if("replace"===l.type){var m=_.clone(l),n=k[2]-k[1]-1,o=k[4]-k[3]-1,p=l.rowEnd-l.rowStart+1,q=k[2]-k[1];if(0===f.slice(k[3],k[4]).join("").length&&(l.overwrite=!0,l.type="delete",n-o>0)){var r=n-o;k[2]-=r;var s=k[2]-k[1],t=this.createOperation("delete",k[1]+s,k[2]+r,k[3]+s,k[4]);h.splice(j+1,0,t)}if(0===e.slice(k[1],k[2]).join("").length&&(l.type="insert"),n>o&&"delete"!==l.type&&(d.replace.push(l),d.all.push(l),c[l.type]+=l.rowEnd-l.rowStart+1,l=m,l.type="delete",k[1]+=p,k[3]+=p),o>n&&"insert"!==l.type)if(l.rowEnd=l.rowStart+q-1,0===f.slice(l.rowStart,l.rowEnd+1).join("").length){l.type="delete",l.overwrite=!0;var u=this.createOperation("insert",k[1],k[2],k[3]+(l.rowEnd-l.rowStart+1),k[4]);h.splice(j+1,0,u)}else{d.replace.push(l),d.all.push(l),c[l.type]+=l.rowEnd-l.rowStart+1;var v=l.rowEnd+1;l=m,l.type="insert",l.rowStart=v}}if("delete"===l.type){var w=e.slice(k[1],k[2]),x=w.join("\n");if(l.overwrite||(x+="\n"),l.rowStart=k[3],l.rowEnd=l.rowStart+(k[2]-k[1]-1),l=_.extend(l,{fromRowStart:k[1],fromRowEnd:k[2]-1,lines:x}),!l.overwrite){var y=l.rowEnd-l.rowStart+1;i+=y}}c[l.type]+=l.rowEnd-l.rowStart+1,d[l.type].push(l),d.all.push(l)}}this.getCount=function(){return c},this.getDifferences=function(){return d}},codebrowser.model.Exercise=Backbone.RelationalModel.extend({urlRoot:function(){return this.get("course")?this.get("course").url()+"/exercises":codebrowser.model.Course.findOrCreate({id:this.courseId}).url()+"/exercises"},initialize:function(a){a&&(this.id=a.id,this.courseId=a.courseId)}}),codebrowser.model.File=Backbone.RelationalModel.extend({content:"",urlRoot:function(){return config.api.main.root+"students/"+this.get("snapshot").get("studentId")+"/courses/"+this.get("snapshot").get("courseId")+"/exercises/"+this.get("snapshot").get("exerciseId")+"/snapshots/"+this.get("snapshot").id+"/files"},getContent:function(){var a=codebrowser.cache.files,b=this.content,c=localStorage.getItem(config.storage.setting.editor.ignoreEmptyLines);if(a){var d=a.folder(this.get("snapshot").id).file(this.id);d&&(b=d.asText())}return b=b.replace(/\r\n|\r/g,"\n"),b=b.replace(/\t/g,"    "),c&&"true"===c&&(b=b.replace(/^ +$/gm,"")),b},lines:function(){return this.getContent().split("\n").length},getFolder:function(){return this.get("path").substring(0,this.get("path").lastIndexOf("/"))}}),codebrowser.model.Instance=Backbone.RelationalModel.extend({urlRoot:config.api.main.root}),codebrowser.model.Snapshot=Backbone.RelationalModel.extend({urlRoot:function(){if(!(this.get("instanceId")&&this.get("studentId")&&this.get("courseId")&&this.get("exerciseId")))throw new Error("Attributes instanceId, studentId, courseId and exerciseId are required to fetch a snapshot.");return config.api.main.root+this.get("instanceId")+"/students/"+this.get("studentId")+"/courses/"+this.get("courseId")+"/exercises/"+this.get("exerciseId")+"/snapshots"},relations:[{type:Backbone.HasMany,key:"files",relatedModel:"codebrowser.model.File",collectionType:"codebrowser.collection.FileCollection",reverseRelation:{key:"snapshot"}}],initialize:function(){this.collection&&(this.set("instanceId",this.collection.instanceId),this.set("studentId",this.collection.studentId),this.set("courseId",this.collection.courseId),this.set("exerciseId",this.collection.exerciseId))},getFiles:function(){var a={};return this.get("files").each(function(b){var c=b.getFolder();a[c]||(a[c]=[]),a[c].push(b.toJSON())}),a}}),codebrowser.model.Student=Backbone.RelationalModel.extend({urlRoot:function(){return config.api.main.root+this.get("instanceId")+"/students"},initialize:function(a){a&&(this.instanceId=a.instanceId)}}),codebrowser.model.Tag=Backbone.RelationalModel.extend({urlRoot:function(){if(!(this.instanceId&&this.studentId&&this.courseId&&this.exerciseId))throw new Error("Attributes instanceId, studentId, courseId and exerciseId are required to fetch a tag.");return config.api.main.root+this.instanceId+"/students/"+this.studentId+"/courses/"+this.courseId+"/exercises/"+this.exerciseId+"/tags"},initialize:function(a,b){b&&(this.instanceId=b.instanceId,this.studentId=b.studentId,this.courseId=b.courseId,this.exerciseId=b.exerciseId),this.collection&&(this.instanceId=this.collection.instanceId,this.studentId=this.collection.studentId,this.courseId=this.collection.courseId,this.exerciseId=this.collection.exerciseId)}}),codebrowser.collection.CourseCollection=Backbone.Collection.extend({model:codebrowser.model.Course,url:function(){return this.studentId?config.api.main.root+this.instanceId+"/students/"+this.studentId+"/courses":config.api.main.root+this.instanceId+"/courses"},initialize:function(a,b){b&&(this.instanceId=b.instanceId,this.studentId=b.studentId)}}),codebrowser.collection.ExerciseCollection=Backbone.Collection.extend({model:codebrowser.model.Exercise,url:function(){if(!this.instanceId||!this.courseId)throw new Error("Options instanceId and courseId are required to fetch exercises.");return this.studentId?config.api.main.root+this.instanceId+"/students/"+this.studentId+"/courses/"+this.courseId+"/exercises":config.api.main.root+this.instanceId+"/courses/"+this.courseId+"/exercises"},initialize:function(a,b){b&&(this.instanceId=b.instanceId,this.studentId=b.studentId,this.courseId=b.courseId)}}),codebrowser.collection.FileCollection=Backbone.Collection.extend({model:codebrowser.model.File,url:function(){return config.api.main.root+"students/"+this.snapshot.get("studentId")+"/courses/"+this.snapshot.get("courseId")+"/exercises/"+this.snapshot.get("exerciseId")+"/snapshots/"+this.snapshot.id+"/files"}}),codebrowser.collection.InstanceCollection=Backbone.Collection.extend({model:codebrowser.model.Instance,url:function(){return config.api.main.root}}),codebrowser.collection.SnapshotCollection=Backbone.Collection.extend({model:codebrowser.model.Snapshot,level:"code",count:5,differencesDone:!1,differences:[],url:function(){if(!(this.instanceId&&this.studentId&&this.courseId&&this.exerciseId))throw new Error("Options instanceId, studentId, courseId and exerciseId are required to fetch snapshots.");return config.api.main.root+this.instanceId+"/students/"+this.studentId+"/courses/"+this.courseId+"/exercises/"+this.exerciseId+"/snapshots"},initialize:function(a,b){b&&(this.instanceId=b.instanceId,this.studentId=b.studentId,this.courseId=b.courseId,this.exerciseId=b.exerciseId)},isCodeLevel:function(){return"code"===this.level},isKeyLevel:function(){return"key"===this.level},fetchFiles:function(a,b){var c=this.get(b)||this.at(0);b=c.get("id");var d=this.indexOf(c),e=localStorage.getItem(config.storage.cache.snapshot.from),f=this,g=localStorage.getItem(config.storage.cache.files.url),h=(this.level?"?level="+this.level:"")+"&from="+b+"&count="+this.count,i=h.substring(0,h.indexOf("&from"));if(codebrowser.cache.files&&g===this.url()+i){if(Math.abs(d-e)<this.count)return void a()}else this.differences=[];JSZipUtils.getBinaryContent(this.url()+"/files.zip"+h,function(b,c){if(b)return void a(b);var e=new JSZip(c);localStorage.setItem(config.storage.cache.files.url,f.url()+i),localStorage.setItem(config.storage.cache.snapshot.level,f.level),localStorage.setItem(config.storage.cache.snapshot.from,d),codebrowser.cache.files=e,a()})},getDuration:function(a,b){return this.at(a).get("timestamp")-this.at(b).get("timestamp")},getMinDuration:function(){var a=this,b=Number.MAX_VALUE;return this.each(function(c,d){if(0!==d){var e=a.getDuration(d,d-1);b>e&&(b=e)}}),b},getMaxDuration:function(){var a=this,b=Number.MIN_VALUE;return this.each(function(c,d){if(0!==d){var e=a.getDuration(d,d-1);e>b&&(b=e)}}),b},getDifference:function(a,b){var c=this.differences[a];return c&&c[b]?c[b]:null},getDifferences:function(){if(0!==this.differences.length)return this.differences;this.differences=[];var a=this;return this.each(function(b,c){var d=a.at(c-1);a.differences[c]||(a.differences[c]={total:0,lines:0});var e=b.get("files");e.each(function(b){var e=b.get("name");a.differences[c].filename||(a.differences[c][e]=null);var f=b,g=null;g=d?d.get("files").findWhere({name:e}):f,g||(g=f);var h=g.getContent();g===f&&(h="");var i=new codebrowser.model.Diff(h,f.getContent());a.differences[c].total+=i.getCount().total(),a.differences[c].lines+=f.lines(),a.differences[c][f.get("name")]=i})}),this.differences}}),codebrowser.collection.StudentCollection=Backbone.Collection.extend({model:codebrowser.model.Student,url:function(){return this.instanceId&&this.courseId&&this.exerciseId?config.api.main.root+this.instanceId+"/courses/"+this.courseId+"/exercises/"+this.exerciseId+"/students":config.api.main.root+this.instanceId+"/students"},initialize:function(a,b){b&&(this.instanceId=b.instanceId,this.courseId=b.courseId,this.exerciseId=b.exerciseId)}}),codebrowser.collection.TagCollection=Backbone.Collection.extend({model:codebrowser.model.Tag,url:function(){if(!(this.instanceId&&this.studentId&&this.courseId&&this.exerciseId))throw new Error("Options instanceId, studentId, courseId and exerciseId are required to fetch tags.");return config.api.main.root+this.instanceId+"/students/"+this.studentId+"/courses/"+this.courseId+"/exercises/"+this.exerciseId+"/tags"},initialize:function(a,b){b&&(this.instanceId=b.instanceId,this.studentId=b.studentId,this.courseId=b.courseId,this.exerciseId=b.exerciseId)}}),codebrowser.view.ListBaseView=Backbone.View.extend({events:{'click [data-action="search"]':"filterListByName",'keyup [data-id="query-string"]':"filterListByName"},render:function(){var a=this.renderTemplate();this.$el.html(a),this.delegateEvents()},update:function(){var a=this.renderTemplate(),b=$(a).find("table");this.$el.find("table").replaceWith(b)},filterListByName:function(){this.filterHelper||(this.filterHelper=new codebrowser.helper.ListViewFilter({containerSelector:"#"+this.id},this.collection));var a=this.filterHelper.filter();this.collection=a.filteredCollection,this.query=a.query,this.update()}}),codebrowser.view.AuthenticationView=Backbone.View.extend({id:"authentication-container",template:Handlebars.templates.Authentication,events:{'click [data-action="sign-in"]':"signIn"},render:function(){this.$el.html(this.template()),this.$el.children("#authentication-modal").modal()},signIn:function(){console.log("Username: "+$('[data-id="username"]',this.$el).val()),console.log("Password: "+$('[data-id="password"]',this.$el).val())}}),codebrowser.view.CoursesView=codebrowser.view.ListBaseView.extend({id:"courses-container",template:Handlebars.templates.CoursesContainer,renderTemplate:function(){var a={query:this.query,instanceId:this.collection.instanceId,studentId:this.collection.studentId,courses:this.collection.toJSON()};return this.collection.studentId&&(a=_.extend(a,{student:this.student.toJSON()})),this.template(a)}}),codebrowser.view.EditorSettingsView=Backbone.View.extend({id:"editor-settings-container",template:Handlebars.templates.EditorSettingsContainer,events:{'click [data-action="save"]':"save"},initialize:function(a){this.parentView=a.parentView,this.render()},render:function(){var a=localStorage.getItem(config.storage.setting.editor.ignoreEmptyLines),b=parseInt(localStorage.getItem(config.storage.setting.editor.fontSize),10),c=localStorage.getItem(config.storage.setting.editor.theme),d=$(this.template());a&&$('[data-id="ignore-empty-lines"]',d).prop("checked","true"===a),c&&$('[data-id="theme"] option[value="'+c+'"]',d).prop("selected",!0),b&&$('[data-id="font-size"] option[value="'+b+'"]',d).prop("selected",!0),this.$el.html(d)},save:function(){localStorage.setItem(config.storage.setting.editor.ignoreEmptyLines,$('[data-id="ignore-empty-lines"]').prop("checked")),localStorage.setItem(config.storage.setting.editor.theme,$('[data-id="theme"] option:selected',this.$el).val()),localStorage.setItem(config.storage.setting.editor.fontSize,$('[data-id="font-size"] option:selected',this.$el).val()),this.parentView.configure(),this.parentView.update(this.parentView.previousModel,this.parentView.model)}}),codebrowser.view.EditorView=Backbone.View.extend({id:"editor-container",template:{topContainer:Handlebars.templates.EditorTopContainer},decorations:{"main-editor":[],"side-editor":[]},markers:{"main-editor":[],"side-editor":[]},insertedLines:{"main-editor":[]},replacedLines:{"main-editor":[]},events:{"click #editor-inspector":"toggleInspector"},split:!1,canSplit:function(){return this.model!==this.previousModel},diff:!1,differences:new codebrowser.model.Diff("",""),inspector:!1,initialize:function(){this.$el.hide(),this.topContainer=$("<div>",{id:"editor-top-container"}),this.editorElement=$("<div>",{id:"editor"}),this.settingsView=new codebrowser.view.EditorSettingsView({parentView:this}),this.sideEditorElement=$("<div>",{id:"side-editor"}).hide(),this.mainEditorElement=$("<div>",{id:"main-editor"}),this.editorElement.append(this.sideEditorElement),this.editorElement.append(this.mainEditorElement),this.$el.append(this.topContainer),this.$el.append(this.editorElement),this.$el.append(this.settingsView.el),this.sideEditor=ace.edit(this.sideEditorElement.get(0)),this.mainEditor=ace.edit(this.mainEditorElement.get(0)),this.configure()},remove:function(){this.settingsView.remove(),Backbone.View.prototype.remove.call(this)},configure:function(){config.editor.configure(this.mainEditor),config.editor.configure(this.sideEditor)},removeDecorations:function(a){for(;this.decorations[a.container.id].length>0;){var b=this.decorations[a.container.id].pop();a.getSession().removeGutterDecoration(b.row,b.style)}},removeMarkers:function(a){for(;this.markers[a.container.id].length>0;)a.getSession().removeMarker(this.markers[a.container.id].pop())},removeInsertedLines:function(a){for(var b=ace.require("ace/range").Range;this.insertedLines[a.container.id].length>0;){var c=this.insertedLines[a.container.id].pop();a.getSession().remove(new b(c.rowStart,0,c.rowEnd+1,0))}},resetReplacedLines:function(a){for(var b=ace.require("ace/range").Range;this.replacedLines[a.container.id].length>0;){var c=this.replacedLines[a.container.id].pop();a.getSession().replace(new b(c.rowStart,0,c.rowEnd,a.getSession().getLine(c.rowEnd).length),c.lines)}},clearDiff:function(){this.removeDecorations(this.mainEditor),this.removeDecorations(this.sideEditor),this.resetReplacedLines(this.mainEditor),this.removeInsertedLines(this.mainEditor),this.removeMarkers(this.mainEditor),this.removeMarkers(this.sideEditor)},render:function(){var a={split:this.split,previous:this.previousModel.toJSON(),difference:this.differences.getCount(),percentageOfChange:Math.round(this.differences.getCount().total()/this.model.lines()*100)},b=$(this.template.topContainer(_.extend(this.model.toJSON(),a)));$("#editor-inspector",b).popover({animation:!1,html:!0,trigger:"click"}),this.topContainer.html(b),this.inspector&&$("#editor-inspector").popover("toggle")},fold:function(a,b){_.each(b,function(b){a.getSession().foldAll(b.start.row,b.end.row,0)})},decorateGutter:function(a,b,c,d){for(var e=b;c>=e;e++)this.decorations[a.container.id].push({row:e,style:"decoration gutter-"+d}),a.getSession().addGutterDecoration(e,"decoration gutter-"+d)},setContent:function(a,b,c){var d=_.clone(a.getSession().getAllFolds()),e=a.getSelection().getSelectionAnchor(),f=a.getSession().getScrollTop();this.removeDecorations(a),this.removeMarkers(a),a.setValue(b),this.fold(a,d),a.moveCursorToPosition(e),a.getSelection().clearSelection(),a.getSession().setScrollTop(f),a.getSession().setMode(c)},update:function(a,b){this.model=b,this.previousModel=a;var c=codebrowser.helper.AceMode.getModeForFilename(this.model.get("name"));this.previousModel===this.model?this.toggleSplit(!1):this.split||this.toggleSplit("true"===localStorage.getItem(config.storage.view.EditorView.split)),this.diff?this.clearDiff():this.toggleDiff("true"===localStorage.getItem(config.storage.view.EditorView.diff)),this.setContent(this.sideEditor,this.previousModel!==this.model?a.getContent():null,c),this.setContent(this.mainEditor,this.model.getContent(),c),this.differences=new codebrowser.model.Diff(this.sideEditor.getValue(),this.mainEditor.getValue()),this.toggleDiff(this.diff),this.$el.show(),this.render()},didResize:function(){this.inspector&&($("#editor-inspector").popover("toggle"),$("#editor-inspector").popover("toggle")),this.mainEditor.resize(),this.sideEditor.resize()},didSplit:function(){this.diff&&(this.clearDiff(),this.toggleDiff(this.diff)),this.mainEditor.resize(),this.sideEditor.resize(),this.mainEditor.renderer.updateFull(),this.sideEditor.renderer.updateFull(),this.render()},toggleSplit:function(a){return void 0!==a?this.split=a:(this.split=!this.split,localStorage.setItem(config.storage.view.EditorView.split,this.split)),this.split?(this.sideEditorElement.css({"float":"left",width:"50%"}),this.sideEditorElement.show(),this.mainEditorElement.css({"float":"right",width:"50%"}),void this.didSplit()):(this.sideEditorElement.hide(),this.mainEditorElement.css({"float":"",width:""}),void this.didSplit())},toggleDiff:function(a){var b=ace.require("ace/range").Range;if(void 0!==a?this.diff=a:(this.diff=!this.diff,localStorage.setItem(config.storage.view.EditorView.diff,this.diff)),this.diff)for(var c=0;c<this.differences.getDifferences().all.length;c++){var d,e=this.differences.getDifferences().all[c];if("delete"===e.type){if(this.split){d=this.sideEditor.getSession().addMarker(new b(e.fromRowStart,0,e.fromRowEnd,1),e.type,"fullLine"),this.decorateGutter(this.sideEditor,e.fromRowStart,e.fromRowEnd,"delete"),this.markers["side-editor"].push(d);continue}e.overwrite?(this.replacedLines["main-editor"].push({rowStart:e.rowStart+e.offset,rowEnd:e.rowEnd+e.offset,lines:this.mainEditor.getSession().getLines(e.rowStart+e.offset,e.rowEnd+e.offset).join("\n")}),this.mainEditor.getSession().replace(new b(e.rowStart+e.offset,0,e.rowEnd+e.offset,this.mainEditor.getSession().getLine(e.rowEnd).length),e.lines)):(this.mainEditor.getSession().insert({row:e.rowStart+e.offset,column:0},e.lines),this.insertedLines["main-editor"].push({rowStart:e.rowStart+e.offset,rowEnd:e.rowEnd+e.offset})),this.decorateGutter(this.mainEditor,e.rowStart+e.offset,e.rowEnd+e.offset,"delete")}var f=0;this.split||(f=e.offset),d=this.mainEditor.getSession().addMarker(new b(e.rowStart+f,0,e.rowEnd+f,1),e.type,"fullLine"),this.decorateGutter(this.mainEditor,e.rowStart+f,e.rowEnd+f,e.type),this.markers["main-editor"].push(d)}else this.clearDiff()},toggleInspector:function(a){a.preventDefault(),this.inspector=!this.inspector}}),codebrowser.view.ErrorView=Backbone.View.extend({id:"error-container",template:Handlebars.templates.Error,render:function(){this.$el.html(this.template(this.model))}}),codebrowser.view.ExercisesView=codebrowser.view.ListBaseView.extend({id:"exercises-container",template:Handlebars.templates.ExercisesContainer,renderTemplate:function(){var a={instanceId:this.collection.instanceId,studentId:this.collection.studentId,courseId:this.collection.courseId,course:this.course.toJSON(),exercises:this.collection.toJSON()};return this.student&&(a=_.extend(a,{student:this.student.toJSON()})),this.template(a)}}),codebrowser.view.InstanceView=codebrowser.view.ListBaseView.extend({id:"instance-container",template:Handlebars.templates.InstanceContainer,renderTemplate:function(){return this.template({instance:this.instance.toJSON()})}}),codebrowser.view.LoadingView=Backbone.View.extend({id:"loading-container",template:Handlebars.templates.Loading,render:function(){this.$el.html(this.template())}}),codebrowser.view.NotFoundErrorView=codebrowser.view.ErrorView.extend({model:{"class":"alert-warning",message:"Not found."}}),codebrowser.view.RootView=codebrowser.view.ListBaseView.extend({id:"root-container",template:Handlebars.templates.RootContainer,renderTemplate:function(){var a={query:this.query,instances:this.collection.toJSON()};return this.template(a)}}),codebrowser.view.SnapshotBrowserView=Backbone.View.extend({id:"snapshot-browser-container",initialize:function(a){this.parentView=a.parentView,this.snapshotFilesView=new codebrowser.view.SnapshotFilesView({parentView:this}),this.$el.append(this.snapshotFilesView.el),this.snapshotTagsView=new codebrowser.view.SnapshotTagsView,this.$el.append(this.snapshotTagsView.el)},remove:function(){this.snapshotFilesView.remove(),this.snapshotTagsView.remove(),Backbone.View.prototype.remove.call(this)},update:function(a,b,c){this.snapshotFilesView.update(a,b,c),this.snapshotTagsView.update(a)
}}),codebrowser.view.SnapshotFilesView=Backbone.View.extend({id:"snapshot-files-container",template:Handlebars.templates.SnapshotFilesContainer,initialize:function(a){this.parentView=a.parentView.parentView},renderDifferences:function(a){var b=this.parentView.collection.getDifferences(),c=this.parentView.collection.indexOf(this.model),d=b[c],e=this.model.get("files");e.each(function(b){var c=d[b.get("name")],e=$('[data-id="'+b.id+'"]',a),f=b.lines(),g=c.getCount().total();g===f&&e.addClass("new"),g>0&&g!==f&&e.addClass("modified")})},render:function(){var a={level:this.model.collection.level,instanceId:this.model.get("instanceId"),exercise:this.model.get("exercise").toJSON(),courseRoute:this.courseRoute,files:this.model.getFiles()},b=$(this.template(_.extend(this.model.toJSON(),a)));this.parentView.editorView.diff&&this.renderDifferences(b);var c=$('[data-id="'+this.file.id+'"]',b);c.addClass("active"),this.$el.html(b)},update:function(a,b,c){this.model=a,this.file=b,this.courseRoute=c,this.render()}}),codebrowser.view.SnapshotTagsView=Backbone.View.extend({id:"snapshot-tags-container",template:Handlebars.templates.SnapshotTagsContainer,events:{'click [data-action="create"]':"create",'click [data-action="delete"]':"delete"},collection:new codebrowser.collection.TagCollection,initialize:function(){this.render()},render:function(){var a=$(this.template({tags:this.collection.toJSON()}));this.$el.html(a)},update:function(a){this.snapshot=a,this.collection=new codebrowser.collection.TagCollection(null,{instanceId:this.snapshot.get("instanceId"),studentId:this.snapshot.get("studentId"),courseId:this.snapshot.get("courseId"),exerciseId:this.snapshot.get("exerciseId")}),this.collection.on("add",$.proxy(this.render,this)),this.collection.on("remove",$.proxy(this.render,this));var b=this;this.collection.fetch({cache:!0,expires:120,success:function(){b.render()},error:function(){throw new Error("Failed tags fetch.")}})},create:function(a){var b=this;a.preventDefault();var c=$('[data-id="tag"]',this.$el).val().trim();if(c){var d=new codebrowser.model.Tag(null,{instanceId:this.snapshot.get("instanceId"),studentId:this.snapshot.get("studentId"),courseId:this.snapshot.get("courseId"),exerciseId:this.snapshot.get("exerciseId")});d.save({name:c},{success:function(){b.collection.add(d,{at:0})},error:function(){throw new Error("Failed tag save.")}})}},"delete":function(a){var b=this,c=$(a.target).data("id"),d=this.collection.get(c);d.destroy({success:function(){b.collection.remove(d)},error:function(){throw new Error("Failed tag delete.")}})}}),codebrowser.view.SnapshotView=Backbone.View.extend({id:"snapshot-container",template:{navigationbarContainer:Handlebars.templates.NavigationBarContainer,navigationContainer:Handlebars.templates.SnapshotActionsContainer},events:{"click #toggleBrowser":"toggleBrowser","click #split":"split","click #diff":"diff","click #level":"level","click #rewind":"playBackwards","click #play":"playForwards","click #first":"first","click #previous":"previous","click #next":"next","click #last":"last"},courseRoute:!1,browser:!0,play:!1,rewind:!1,initialize:function(){this.$el.hide(),this.navigationbarContainer=$("<div>",{id:"navigation-bar-container"}),this.$el.append(this.navigationbarContainer),this.snapshotsTimelineView=new codebrowser.view.SnapshotsTimelineView({parentView:this}),this.$el.append(this.snapshotsTimelineView.el),this.navigationContainer=$("<div>",{id:"snapshot-navigation-container"}),this.$el.append(this.navigationContainer);var a=$("<div>",{id:"snapshot-content-container"});this.snapshotBrowserView=new codebrowser.view.SnapshotBrowserView({parentView:this}),a.append(this.snapshotBrowserView.el),this.editorView=new codebrowser.view.EditorView,a.append(this.editorView.el),this.$el.append(a),$(window).resize($.proxy(this.resize,this)),$(document).keydown($.proxy(this.keydown,this))},remove:function(){$(window).off("resize",this.resize),$(document).off("keydown",this.keydown),this.snapshotsTimelineView.remove(),this.snapshotBrowserView.remove(),this.editorView.remove(),Backbone.View.prototype.remove.call(this)},render:function(){var a=this.collection.indexOf(this.model),b={current:a+1,total:this.collection.length,playback:this.collection.isKeyLevel()&&1!==this.collection.length},c=$(this.template.navigationbarContainer(_.extend(this.model.toJSON(),{student:this.student.toJSON(),course:this.model.get("course").toJSON(),exercise:this.model.get("exercise").toJSON(),courseRoute:this.courseRoute}))),d=$(this.template.navigationContainer(b)),e=$("#speed").val()||"1x";this.updateEditorActions(d),this.updatePlaybackActions(d),this.updateNavigation(d,a),this.rendered?this.$el.find("#snapshot-navigation").replaceWith($("#snapshot-navigation",d)):this.navigationContainer.html(d),this.navigationbarContainer.html(c),$("#speed",d).val(e),this.rendered=!0},updateEditorActions:function(a){this.rendered&&(a=this.navigationContainer),this.browser&&$("#toggleBrowser",a).addClass("active"),this.editorView.split&&$("#split",a).addClass("active"),this.editorView.diff&&$("#diff",a).addClass("active"),this.collection.isKeyLevel()&&$("#level",a).addClass("active"),$("#split",a).attr("disabled",!this.editorView.canSplit()),$("#level",a).attr("disabled",this.play)},updatePlaybackActions:function(a){this.rendered&&(a=this.navigationContainer);var b=this.rewind?"#rewind":"#play",c=this.rewind?"#play":"#rewind",d=this.rewind?"#glyphicon-backward":"#glyphicon-play";this.play&&($(b+" span",a).removeClass(d).addClass("glyphicon-stop"),$(b,a).addClass("active"),$(c,a).attr("disabled",!0)),!this.play&&$(b+" span",a).hasClass("glyphicon-stop")&&($(b+" span",a).removeClass("glyphicon-stop").addClass(d),$(b,a).removeClass("active"),$(c,a).attr("disabled",!1))},updateNavigation:function(a,b){$("#first",a).attr("disabled",0===b),$("#previous",a).attr("disabled",0===b),$("#next",a).attr("disabled",b===this.collection.length-1),$("#last",a).attr("disabled",b===this.collection.length-1)},update:function(a,b){this.model=a,this.browser&&this.toggleBrowser(null,"true"===localStorage.getItem(config.storage.view.SnapshotView.browser));var c=this.collection.indexOf(a),d=this.collection.at(c-1);d||(d=this.model),this.file=this.model.get("files").get(b);var e=this.file.get("name"),f=d.get("files").findWhere({name:e});if(this.$el.show(),this.snapshotsTimelineView.update(this.collection,c,e,this.courseRoute),this.editorView.update(f||this.file,this.file),this.snapshotBrowserView.update(this.model,this.file,this.courseRoute),this.play){var g=$("#snapshot-files-container ul li.active a").attr("href"),h=$("#snapshot-files-container ul li.new a").attr("href")||$("#snapshot-files-container ul li.modified a").attr("href");if(h&&g!==h)return void codebrowser.app.snapshot.navigate(h.substring(2),{replace:!0})}this.play&&!this.playId&&(this.play=!1,this.playback()),this.render()},resize:function(){this.didResize()},didResize:function(){this.snapshotsTimelineView.didResize(),this.editorView.didResize()},keydown:function(a){$(a.target).is("input")||(37===a.keyCode&&this.previous(),39===a.keyCode&&this.next(),79===a.keyCode&&this.playBackwards(),80===a.keyCode&&this.playForwards(),(107===a.keyCode||190===a.keyCode)&&this.speedUp(),(109===a.keyCode||188===a.keyCode)&&this.speedDown())},toggleBrowser:function(a,b){return void 0!==b?this.browser=b:(this.browser=!this.browser,localStorage.setItem(config.storage.view.SnapshotView.browser,this.browser)),this.browser?(this.editorView.$el.css("margin-left",this.snapshotBrowserView.$el.width()+30),this.editorView.didResize(),void this.snapshotBrowserView.$el.show()):(this.snapshotBrowserView.$el.hide(),this.editorView.$el.css("margin-left",0),void this.editorView.didResize())},split:function(){this.editorView.toggleSplit()},diff:function(){this.editorView.toggleDiff(),this.snapshotBrowserView.update(this.model,this.file,this.courseRoute)},level:function(){this.collection.level=this.collection.isCodeLevel()?"key":"code",this.snapshotsTimelineView.rendered=!1,this.rendered=!1,this.navigate()},playBackwards:function(){(!this.play||this.rewind)&&(this.rewind=!0,this.playback())},playForwards:function(){this.play&&this.rewind||(this.rewind=!1,this.playback())},playback:function(){if(this.play)clearInterval(this.playId),this.play=!1;else{var a=parseFloat($("#speed",this.navigationContainerOutput).val());this.play=!0;var b=this;this.playId=setInterval(function(){return!b.rewind&&b.collection.last()===b.model||b.rewind&&b.collection.first()===b.model?(clearInterval(b.playId),b.play=!1,void b.render()):void(b.rewind?b.previous():b.next())},1e3/a)}this.render()},speedUp:function(){var a=$("#speed option:selected",this.navigationContainer).val(),b=$("#speed option:selected",this.navigationContainer).next().val();$("#speed",this.navigationContainer).val(b||a)},speedDown:function(){var a=$("#speed option:selected",this.navigationContainer).val(),b=$("#speed option:selected",this.navigationContainer).prev().val();$("#speed",this.navigationContainer).val(b||a)},url:function(){return"#/"+this.collection.instanceId+(this.courseRoute?"/courses/":"/students/")+(this.courseRoute?this.collection.courseId:this.collection.studentId)+(this.courseRoute?"/exercises/":"/courses/")+(this.courseRoute?this.collection.exerciseId:this.collection.courseId)+(this.courseRoute?"/students/":"/exercises/")+(this.courseRoute?this.collection.studentId:this.collection.exerciseId)+"/snapshots/"},navigate:function(a,b,c){return this.play&&this.playId&&(clearInterval(this.playId),this.playId=null),a?(b||(b=a.get("files").first()),void codebrowser.app.snapshot.navigate(this.url()+a.id+"/files/"+b.id+"?level="+this.collection.level,{replace:c?c.replace:c})):void codebrowser.app.snapshot.navigate(this.url(),{replace:c?c.replace:c})},first:function(){var a=this.collection.first(),b=a.get("files").findWhere({name:this.file.get("name")});this.navigate(a,b)},previous:function(){var a=this.collection.indexOf(this.model),b=this.collection.at(a-1);if(b){var c=b.get("files").findWhere({name:this.file.get("name")});this.navigate(b,c)}},next:function(){var a=this.collection.indexOf(this.model),b=this.collection.at(a+1);if(b){var c=b.get("files").findWhere({name:this.file.get("name")});this.navigate(b,c)}},last:function(){var a=this.collection.last(),b=a.get("files").findWhere({name:this.file.get("name")});this.navigate(a,b)}}),codebrowser.view.SnapshotsTimelineView=Backbone.View.extend({id:"snapshots-timeline-container",template:{bottomContainer:Handlebars.templates.SnapshotsTimelineBottomContainer},width:0,snapshotElements:[],pointerSetOffsetX:0,scroll:null,dragging:!1,initialize:function(a){this.parentView=a.parentView,this.$el.hide(),this.paper=Raphael(this.el,"100%",81),this.bottomContainer=$("<div>"),this.$el.append(this.bottomContainer)},getViewX:function(){var a=0;return this.paper._viewBox&&(a=this.paper._viewBox[0]),a},isVisible:function(a){var b=this.getViewX(),c=$(this.paper.canvas).width();return a>=b&&b+c>=a},snapshotWeight:function(a){var b=.8;if(this.collection.isKeyLevel())return b;var c=this.differences[a],d=Math.round(c.total/c.lines*100);return 0===d?b:(b=2*d/100+1,b=Math.round(2*b)/2,Math.min(2,b))},distanceWeight:function(a,b,c){var d=0;if(0===a)return 1;var e=this.collection.getDuration(a,a-1);return d=5*(e-b)/(c-b)+1,d=Math.round(100*d)/100,Math.min(6,d)},setViewBox:function(a){var b=$(this.paper.canvas).width();this.paper.setViewBox(a,0,b,this.paper.height,!1)},centerOn:function(a){var b=$(this.paper.canvas).width(),c=a-b/2;return 0>c?void this.setViewBox(0):c>this.width-b?void this.setViewBox(this.width-b):void this.setViewBox(c)},focus:function(){var a=this.snapshotElements[this.currentSnapshotIndex].attr("cx");0!==this.currentSnapshotIndex&&(this.isVisible(this.snapshotElements[this.currentSnapshotIndex-1].attr("cx"))||this.centerOn(a)),this.currentSnapshotIndex!==this.snapshotElements.length-1&&(this.isVisible(this.snapshotElements[this.currentSnapshotIndex+1].attr("cx"))||this.centerOn(a))},moveTimeline:function(a){var b=this.getViewX(),c=$(this.paper.canvas).width();if(0>b+a&&0>a)return void this.setViewBox(Math.max(0,0-b));if(b+c+a>=this.width&&a>0){var d=this.width-b-c;return void this.setViewBox(b+d)}this.setViewBox(b+a),this.pointerSetOffsetX+=a,this.pointerSet.transform("...t "+a+", 0")},renderDuration:function(a,b,c,d,e,f){if(a){var g=codebrowser.helper.Duration.calculate(b.get("timestamp"),a.get("timestamp"),!0);if("0 s"!==g){var h=this.paper.text(c-e-f/2,d+30,g);$(h.node).attr("class","duration")}}},renderTimeline:function(a,b,c){var d=this.paper.path("M "+a+" "+b+" L "+c+" "+b);$(d.node).attr("class","timeline"),d.toBack()},renderSnapshotIndex:function(a,b){var c=this.paper.text(b,5,a+1);$(c.node).attr("class","snapshot-index")},renderSnapshotWeight:function(a,b,c){if(!this.collection.isKeyLevel()){var d=this.differences[a],e=(d.total/d.lines).toFixed(2);if("0.00"!==e){e="1.00"!==e?e.slice(1):e.slice(0,1);var f=this.paper.text(b,c,e),g=this.snapshotWeight(a),h=11;g>1&&(h*=g),f.attr({"font-size":h}),$(f.node).attr("class","snapshot-weight")}}},renderSnapshot:function(a,b,c,d,e){var f=this.paper.path("M"+c+" "+this.paper.height+", L"+c+" 0");$(f.node).attr("class","area"),$(f.node).attr({"data-toggle":"tooltip",title:moment(new Date(a.get("timestamp"))).format("D.M.YYYY HH.mm"),"data-container":"body"}),this.renderSnapshotIndex(b,c);var g=this.paper.rect(c-e,0,2*e,this.paper.height);$(g.node).attr("class","area");var h=this.paper.circle(c,d,e);$(h.node).attr("class","snapshot"),this.renderSnapshotWeight(b,c,d);var i=this.paper.circle(c,d,e);$(i.node).attr("class","area snapshot");var j=a.get("files").findWhere({name:this.filename});g.data("snapshot",a),g.data("file",j),i.data("snapshot",a),i.data("file",j);var k=this;return i.click(function(){var a=this.data("snapshot"),b=this.data("file");$(i.node).tooltip("destroy"),k.parentView.navigate(a,b,{course:this.courseRoute})}),i.mouseover(function(){this.animate({transform:"S 1.1"},150),h.animate({transform:"S 1.1"},150),k.scroll||$(f.node).tooltip("show")}),i.mouseout(function(){this.animate({transform:"S 1"},150),h.animate({transform:"S 1"},150),$(f.node).tooltip("hide")}),h},renderPointer:function(a,b){this.pointerSet=this.paper.set();var c=7,d=a-c/2,e=this.paper.height,f=a,g=e-c/2,h=this.paper.path("M"+f+" "+g+", L"+f+" 0");$(h.node).attr("class","pointer-line"),h.toBack(),this.pointerSet.push(h);var i=this.paper.path("M"+d+" "+e+", L"+(d+c/2)+" "+(e-c)+", "+(d+c)+" "+e+"Z");$(i.node).attr("class","pointer"),this.pointerSet.push(i);var j=this.paper.rect(a-b,0,2*b,this.paper.height);$(j.node).attr("class","area pointer"),this.pointerSet.push(j),this.pointerSet.drag(this.dragMove,this.dragStart,this.dragEnd,this,this,this).onDragOver($.proxy(this.dragOver,this))},render:function(){this.snapshotElements=[],this.paper.clear();var a=Math.min(6e4,this.collection.getMinDuration()),b=Math.min(3e5,this.collection.getMaxDuration()),c=this.paper.height/2+3,d=0,e=0,f=0,g=this;this.collection.each(function(h,i){var j=g.distanceWeight(i,a,b),k=g.snapshotWeight(i),l=45*j,m=12*k;f+=2*m,0===i?d=f:f+=l,i===g.collection.length-1&&(e=m);var n=g.collection.at(i-1);if(!g.rendered){g.renderDuration(n,h,f,c,m,l);var o=g.renderSnapshot(h,i,f,c,m);g.snapshotElements.push(o)}i===g.currentSnapshotIndex&&g.renderPointer(f,m)}),this.renderTimeline(d,c,f),this.width=d+f+e,this.focus();var h={first:this.collection.first().toJSON(),last:this.collection.last().toJSON()},i=this.template.bottomContainer(h);this.bottomContainer.html(i,i)},updatePointer:function(){this.pointerSet&&this.pointerSet.items.forEach(function(a){a.remove()});var a=this.snapshotElements[this.currentSnapshotIndex];this.renderPointer(a.attr("cx"),a.attr("r")),this.focus()},update:function(a,b,c,d){if(this.collection=a,this.courseRoute=d,1!==this.collection.length){if(this.$el.show(),this.currentSnapshotIndex=b,this.filename=c,!this.dragging&&this.rendered)return void this.updatePointer();this.differences=this.collection.getDifferences(),this.dragging||(this.render(),this.rendered=!0)}},didResize:function(){if(0!==this.snapshotElements.length){var a=this.snapshotElements[this.currentSnapshotIndex].attr("cx");this.rendered?this.updatePointer():this.render(),this.centerOn(a)}},dragStart:function(){this.dragging=!0},dragEnd:function(){this.dragging=!1,this.pointerSetOffsetX=0,this.stopScroll(),this.rendered?this.updatePointer():this.render()},dragMove:function(a,b,c){this.pointerSet.transform("T "+(this.pointerSetOffsetX+a)+", 0");var d=$(this.paper.canvas).width(),e=$(this.paper.canvas).offset(),f=e.left,g=e.left+d;return f+50>c?void this.startScroll(-5):c>g-50?void this.startScroll(5):void this.stopScroll()},dragOver:function(a){a.data("snapshot")&&this.parentView.navigate(a.data("snapshot"),a.data("file"),{course:this.courseRoute})},startScroll:function(a){if(!this.scroll){var b=this;this.scroll=setInterval(function(){b.moveTimeline(a)},1e3/60)}},stopScroll:function(){this.scroll&&(clearInterval(this.scroll),this.scroll=!1)}}),codebrowser.view.StudentsView=codebrowser.view.ListBaseView.extend({id:"students-container",template:Handlebars.templates.StudentsContainer,renderTemplate:function(){var a={query:this.query,students:this.collection.toJSON(),instanceId:this.collection.instanceId};return this.course&&this.exercise&&(a=_.extend(a,{course:this.course.toJSON(),exercise:this.exercise.toJSON()})),this.template(a)}}),codebrowser.controller.ViewController={view:null,isActive:function(a){return this.view===a},push:function(a,b){this.isActive(a)||(this.view&&this.view.remove(),this.view=a,b&&this.view.render(),$(config.view.container).html(this.view.el))}},codebrowser.router.BaseRouter=Backbone.Router.extend({loadingView:new codebrowser.view.LoadingView,routes:{"":"root","*notFound":"notFound"},initialize:function(){this.rootView=new codebrowser.view.RootView,this.notFoundView=new codebrowser.view.NotFoundErrorView},root:function(){var a=this;this.rootView.collection=new codebrowser.collection.InstanceCollection,this.fetchModel(this.rootView.collection,!0,function(){a.rootView.render(),codebrowser.controller.ViewController.push(a.rootView)})},notFound:function(a){this.notFoundView.model.message=a||"Not found.",codebrowser.controller.ViewController.push(this.notFoundView,!0)},fetchModel:function(a,b,c,d){var e=this;a.on("request",function(){codebrowser.controller.ViewController.push(e.loadingView,!0)}),a.fetch({traditional:!0,data:d?d:"",cache:b,expires:b?config.cache.expires:0,success:function(a,b,d){c(a,b,d)},error:function(){e.notFound()}})}}),codebrowser.router.CourseRouter=codebrowser.router.BaseRouter.extend({routes:{":instanceId/courses(/)":"courses",":instanceId/students/:studentId(/)":"navigation",":instanceId/students/:studentId/courses(/)":"courses"},initialize:function(){codebrowser.router.BaseRouter.prototype.initialize(),this.courseView=new codebrowser.view.CoursesView},navigation:function(a,b){codebrowser.app.course.navigate("#/"+a+"/students/"+b+"/courses",{replace:!0})},courses:function(a,b){var c=this,d=_.after(b?2:1,function(){c.courseView.render(),codebrowser.controller.ViewController.push(c.courseView)});if(b){var e=codebrowser.model.Student.findOrCreate({instanceId:a,id:b});this.fetchModel(e,!0,function(){c.courseView.student=e,d()})}var f=new codebrowser.collection.CourseCollection(null,{instanceId:a,studentId:b});this.courseView.collection=f,this.fetchModel(f,!0,d)}}),codebrowser.router.ExerciseRouter=codebrowser.router.BaseRouter.extend({routes:{":instanceId/courses/:courseId(/)":"navigateToCourseExercises",":instanceId/courses/:courseId/exercises(/)":"courseExercises",":instanceId/students/:studentId/courses/:courseId(/)":"navigation",":instanceId/students/:studentId/courses/:courseId/exercises(/)":"exercises"},initialize:function(){codebrowser.router.BaseRouter.prototype.initialize(),this.exerciseView=new codebrowser.view.ExercisesView},navigateToCourseExercises:function(a,b){codebrowser.app.exercise.navigate("#/"+a+"/courses/"+b+"/exercises",{replace:!0})},navigation:function(a,b,c){codebrowser.app.exercise.navigate("#/"+a+"/students/"+b+"/courses/"+c+"/exercises",{replace:!0})},courseExercises:function(a,b){this.exercises(a,null,b)},exercises:function(a,b,c){var d=this,e=_.after(3,function(){d.exerciseView.render(),codebrowser.controller.ViewController.push(d.exerciseView)});if(b){var f=codebrowser.model.Student.findOrCreate({instanceId:a,id:b});this.fetchModel(f,!0,function(){d.exerciseView.student=f,e()})}else e();var g=codebrowser.model.Course.findOrCreate({instanceId:a,id:c}),h=new codebrowser.collection.ExerciseCollection(null,{instanceId:a,studentId:b,courseId:c});this.fetchModel(g,!0,function(){d.exerciseView.course=g,e()}),this.exerciseView.collection=h,this.fetchModel(h,!0,e)}}),codebrowser.router.InstanceRouter=codebrowser.router.BaseRouter.extend({routes:{":instanceId(/)":"instance"},initialize:function(){codebrowser.router.BaseRouter.prototype.initialize(),this.instanceView=new codebrowser.view.InstanceView},instance:function(a){var b=this,c=codebrowser.model.Instance.findOrCreate({id:a}),d=_.after(1,function(){b.instanceView.render(),codebrowser.controller.ViewController.push(b.instanceView)});this.fetchModel(c,!0,function(){b.instanceView.instance=c,d()})}}),codebrowser.router.SnapshotRouter=codebrowser.router.BaseRouter.extend({routes:{":instanceId/students/:studentId/courses/:courseId/exercises/:exerciseId(/)":"snapshot",":instanceId/students/:studentId/courses/:courseId/exercises/:exerciseId/snapshots(/)":"snapshot",":instanceId/students/:studentId/courses/:courseId/exercises/:exerciseId/snapshots/:snapshotId(/)":"snapshot",":instanceId/students/:studentId/courses/:courseId/exercises/:exerciseId/snapshots/:snapshotId/files/:fileId?level=:level(/)":"snapshot",":instanceId/courses/:courseId/exercises/:exerciseId/students/:studentId(/)":"navigation",":instanceId/courses/:courseId/exercises/:exerciseId/students/:studentId/snapshots(/)":"navigation",":instanceId/courses/:courseId/exercises/:exerciseId/students/:studentId/snapshots/:snapshotId(/)":"navigation",":instanceId/courses/:courseId/exercises/:exerciseId/students/:studentId/snapshots/:snapshotId/files/:fileId?level=:level(/)":"navigation"},studentId:null,exerciseId:null,course:null,exercise:null,navigation:function(a,b,c,d,e,f,g){this.snapshot(a,d,b,c,e,f,g,{courseRoute:!0})},snapshot:function(a,b,c,d,e,f,g,h){var i;codebrowser.controller.ViewController.isActive(this.snapshotView)||(this.snapshotView=new codebrowser.view.SnapshotView,codebrowser.controller.ViewController.push(this.snapshotView)),this.snapshotView.collection&&this.studentId===b&&this.exerciseId===d?i=this.snapshotView.collection:(i=new codebrowser.collection.SnapshotCollection(null,{instanceId:a,studentId:b,courseId:c,exerciseId:d}),i.level=g||localStorage.getItem(config.storage.cache.snapshot.level)||"code",this.studentId=b,this.exerciseId=d,this.snapshotView.collection=i),h&&h.courseRoute&&(this.snapshotView.courseRoute=!0),this.fetch(a,b,c,d,e,f,i)},fetch:function(a,b,c,d,e,f,g){var h=this,i=_.after(5,function(){h.synced(e,f,g)}),j=codebrowser.model.Student.findOrCreate({instanceId:a,id:b});this.fetchModel(j,!0,function(){h.snapshotView.student=j,i()});var k=codebrowser.model.Course.findOrCreate({instanceId:a,id:c});this.fetchModel(k,!0,function(){h.course=k,i()});var l=codebrowser.model.Exercise.findOrCreate({id:d,courseId:c});this.fetchModel(l,!0,function(){h.exercise=l,i()}),this.fetchModel(g,!0,function(){return 0===g.length?void h.notFound("No snapshots."):(g.fetchFiles(function(a){return a?void h.notFound():void i()},e),void i())},{level:g.level})},synced:function(a,b,c){var d=c.get(a)||c.at(0);return d?b?d.get("files").get(b)?(d.set("exercise",this.exercise),d.set("course",this.course),void this.snapshotView.update(d,b)):void(d.get("files").at(0)?this.snapshotView.navigate(d,null):this.notFound()):void this.snapshotView.navigate(d,null):void this.notFound()}}),codebrowser.router.StudentRouter=codebrowser.router.BaseRouter.extend({routes:{":instanceId/students(/)":"students",":instanceId/courses/:courseId/exercises/:exerciseId(/)":"navigation",":instanceId/courses/:courseId/exercises/:exerciseId/students(/)":"exerciseStudents"},initialize:function(){codebrowser.router.BaseRouter.prototype.initialize(),this.studentView=new codebrowser.view.StudentsView},navigation:function(a,b,c){codebrowser.app.student.navigate("#/"+a+"/courses/"+b+"/exercises/"+c+"/students",{replace:!0})},exerciseStudents:function(a,b,c){this.students(a,{courseId:b,exerciseId:c})},students:function(a,b){var c=this,d=_.after(3,function(){c.studentView.render(),codebrowser.controller.ViewController.push(c.studentView)});if(b){b.instanceId=a;var e=_.after(1,function(){var a=codebrowser.model.Exercise.findOrCreate({id:b.exerciseId});c.fetchModel(a,!0,function(){c.studentView.exercise=a,d()})}),f=codebrowser.model.Course.findOrCreate({instanceId:a,id:b.courseId});this.fetchModel(f,!0,function(){c.studentView.course=f,c.studentView.exercise=null,e(),d()})}else b={instanceId:a},c.studentView.course=null,c.studentView.exercise=null,d(),d();var g=new codebrowser.collection.StudentCollection(null,b);this.studentView.collection=g,this.fetchModel(g,!0,d)}});